<html>
    <head> 
        <title>geoquery or gquery</title>
        <script type="text/javascript" src="jquery-1.3.2.min.js"></script>
        <script type="text/javascript" src="OpenLayers.js"></script>
        <script type="text/javascript" src="jquery.map.js"></script>        
        <script type="text/javascript">
         
        function showPopup(event) { 
            //console.log("selected feature");
            //console.log(event);
            $('#feature').html("<p>" + event.feature.attributes.description + "<br /><br />"+ event.map.getPixelFromLonLat(event.feature.geometry.getBounds().getCenterLonLat()) + "</p>").show(); 
        }; 

        function closePopup(event) {
            //console.log("feature unselect"); 
            //console.log(event);
            $('#feature').html("").hide();  
        }; 

         $(document).ready(function(){
                 $('#map').map({ 
                      'extent': [-73.508240, 41.237962,-69.927802, 42.886818], 
                      'baselayer' : 'bluemarble', 
                      'url' : './regions.kml', 
                      onClick: function(event) { 
                             showPopup(event); 
                             },
                      onUnclick: function(event) { 
                            closePopup(event);   
                          }    
                      }) ;   
            });
        /* 
            
        */
        </script>
        <style type="text/css">
        #map {
            margin: 5px auto ; 
            height: 500px; 
            width: 500px; 
            background: #eee ;
            position: relative;
        } 
        #feature {background: #eee; position: absolute; z-index: 100000; width: 100%;ÃŸ} 

        </style>
   </head> 
<body>
<div id="map"><div id="feature"> </div></div> 
  
</body>
</html>
